<!doctype html>
<html lang="zh-TW" style="height:100%;">
<head>
	<meta charset="UTF-8">
	<title>BRT快捷公車資訊系統</title>
	
	<!-- JQuery -->
	<script src="jquery-1.10.2.min.js"></script>

	<!-- Google Map -->
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
	<!--script src="http://openlayers.org/api/OpenLayers.js"></script-->
	<script src="google_map_jquery_builder.js"></script>
	
	<!-- Boostrap -->
	<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
	<script src="bootstrap/js/bootstrap.min.js"></script>

	<!-- Boostrap Plugin -->
	<script src="bootstrap/timepicker_plugin/js/bootstrap-timepicker.min.js"></script>
	<link href="bootstrap/timepicker_plugin/css/bootstrap-timepicker.min.css" rel="stylesheet" media="screen">

	<!--ExtJS-->
	<link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">
    <script type="text/javascript" src="extjs/ext-all.js"></script>
</head>
<body style="height:100%;padding:0px;margin:0px;overflow-y:scroll;min-width:1024px;width:100%;margin:auto;">
	<table style="width:100%;height:100%;" border="0">
		<tbody>
			<tr>
				<th style="height:100px;vertical-align:middle;text-align:center;" colspan="2">
					Banner Logo
				</th>
			</tr>
			<tr>
				<td style="height:42px;vertical-align:middle;padding:0px;" colspan="2">
					<div class="navbar" style="margin:0px;">
						<div class="navbar-inner">
						<a class="brand" href="#">BRT快捷公車資訊系統</a>
							<ul class="nav">
								<li class="active"><a href="#">首页</a></li>
								<li><a href="#">Link</a></li>
								<!-- <li><a href="#">Link</a></li> -->
							</ul>
						</div>
					</div>
				</td>
			</tr>
			<tr>
				<td style="width:180px;vertical-align:top;">

					<!-- 選單UI -->
					<div class="accordion" id="accordion2">

						<div class="accordion-group">
							<div class="accordion-heading">
								<div class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse1">
									BRT即時狀態
								</div>
							</div>
							<div id="collapse1" class="accordion-body collapse">
								<div class="accordion-inner">
									<div class="btn btn-info btn-block text-center" onclick="bt1();">即時狀態</div>
									<div class="btn btn-info btn-block text-center" onclick="bt2();">號誌控制邏輯</div>
								</div>
							</div>
						</div>

						<div class="accordion-group">
							<div class="accordion-heading">
								<div class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse2" onclick="bt3();">
									控制設備資訊
								</div>
							</div>
							<div id="collapse2" class="accordion-body collapse">
								<div class="accordion-inner">
										<label class="checkbox"><span style="width:25px;height:25px;border:1px solid #303030;margin-right:10px;display:inline-block;text-align:center;">圖</span><input type="checkbox" checked="true" />AVI</label>
										<label class="checkbox"><span style="width:25px;height:25px;border:1px solid #303030;margin-right:10px;display:inline-block;text-align:center;">圖</span><input type="checkbox" checked="true" />號誌控制器</label>
										<label class="checkbox"><span style="width:25px;height:25px;border:1px solid #303030;margin-right:10px;display:inline-block;text-align:center;">圖</span><input type="checkbox" checked="true" />觸發站</label>
										<label class="checkbox"><span style="width:25px;height:25px;border:1px solid #303030;margin-right:10px;display:inline-block;text-align:center;">圖</span><input type="checkbox" checked="true" />車輛偵測器</label>
										<label class="checkbox"><span style="width:25px;height:25px;border:1px solid #303030;margin-right:10px;display:inline-block;text-align:center;">圖</span><input type="checkbox" checked="true" />DSRC</label>
										<label class="checkbox"><span style="width:25px;height:25px;border:1px solid #303030;margin-right:10px;display:inline-block;text-align:center;">圖</span><input type="checkbox" checked="true" />GPS</label>
									</label>
								</div>
							</div>
						</div>

						<div class="accordion-group">
							<div class="accordion-heading">
								<div class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse3">
									排程
								</div>
							</div>
							<div id="collapse3" class="accordion-body collapse">
								<div class="accordion-inner">
									<div class="btn btn-info btn-block text-center" onclick="bt4();">路口參數</div>
									<div class="btn btn-info btn-block text-center" onclick="bt5();">路口排程</div>
								</div>
							</div>
						</div>

						<div class="accordion-group">
							<div class="accordion-heading">
								<div class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse4" onclick="bt6();">
									BRT績效
								</div>
							</div>
						</div>

						<div class="accordion-group">
							<div class="accordion-heading">
								<div class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse5" onclick="bt7();">
									事故顯示
								</div>
							</div>
						</div>

						<hr style="margin:5px;vertical-align:middle;border: 1px solid #DDDDDD;" />

						<div class="accordion-group">
							<div class="accordion-heading">
								<div style="color:gold;" class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse5" onclick="bt7();">
									事故建立
								</div>
							</div>
						</div>

						<div class="accordion-group">
							<div class="accordion-heading">
								<div style="color:gold;" class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse5" onclick="bt7();">
									帳號帳號管理
								</div>
							</div>
						</div>

						<div class="accordion-group">
							<div class="accordion-heading">
								<div style="color:gold;" class="accordion-toggle btn-primary text-center" data-toggle="collapse" data-parent="#accordion2" href="#collapse5" onclick="bt7();">
									路口設備管理
								</div>
							</div>
						</div>
					</div>
					<div style="text-align:center;vertical-align:middle;">
						插圖 or 動畫
					</div>
				</td>
				<td id="centerview" style="vertical-align:top;">
					<!-- 內頁 -->
				</td>
			</tr>
			<tr>
				<td class="bottomInfo" style="height:200px;vertical-align:middle;text-align:center;" colspan="2">
					<!-- 下方資訊頁 -->
					資訊專欄(需要美化邊框)
				</td>
			</tr>
		</tbody>
	</table>

	<script>
		var qmap;

		// 登入
		var bt0=function(){
			var loginUI=$('<div class="btn btn-danger" style="width:20px;height:40px;position:fixed;z-index:100;margin-left:10px;bottom:20px;left:0px;">登<br>入</div>');
			loginUI.appendTo($('body'));
			loginUI.click(function(e){

			});
		};
		bt0();

		var bt1=function(){

			$('ul.nav').empty()
			.append('<li class="active"><a href="#">首页</a></li>')
			.append('<li class="active"><a href="#">BRT即時狀態</a></li>')
			.append('<li class="active"><a href="#">即時狀態</a></li>');

			$('table td.bottomInfo').show();
			qmap=$('#centerview').empty().css('background-color','transparent').buildGoogleMap();
			qmap.addInfo(
				'<div class="btn-group btn-group-vertical">\
					<div class="btn btn-success">快捷巴士</div>\
					<div class="btn btn-success">快捷巴士站</div>\
					<div class="btn btn-success">優先號誌</div>\
					<div class="btn btn-success">BRT路線</div>\
					<div class="btn btn-success">TOD</div>\
					<div class="btn btn-success">Priority</div>\
					<div class="btn btn-success">手動</div>\
				</div>',
				google.maps.ControlPosition.RIGHT_BOTTOM,
				{
					backgroundColor:'silver',
					width: 130,
					marginBottom:5,
					marginRight:5
				}
			);

			$('#centerview').hide().fadeIn(300);
		};

		var bt2=function(){

			$('ul.nav').empty()
			.append('<li class="active"><a href="#">首页</a></li>')
			.append('<li class="active"><a href="#">BRT即時狀態</a></li>')
			.append('<li class="active"><a href="#">號誌控制邏輯</a></li>');

			$('table td.bottomInfo').show();
			qmap=$('#centerview').empty().css('background-color','transparent').buildGoogleMap();
			qmap.addInfo(
				'<div class="btn-group btn-group-vertical">\
					<div class="btn btn-success">快捷巴士</div>\
					<div class="btn btn-success">快捷巴士站</div>\
					<div class="btn btn-success">優先號誌</div>\
					<div class="btn btn-success">BRT路線</div>\
					<div class="btn btn-success">TOD</div>\
					<div class="btn btn-success">Priority</div>\
					<div class="btn btn-success">手動</div>\
				</div>',
				google.maps.ControlPosition.RIGHT_BOTTOM,
				{
					backgroundColor:'silver',
					width: 130,
					marginBottom:5,
					marginRight:5
				}
			);

			$('#centerview').hide().fadeIn(300);
		};

		var bt3=function(){

			$('ul.nav').empty()
			.append('<li class="active"><a href="#">首页</a></li>')
			.append('<li class="active"><a href="#">控制設備資訊</a></li>');

			$('table td.bottomInfo').show();
			qmap=$('#centerview').empty().css('background-color','transparent').buildGoogleMap();
			qmap.addInfo(
				'<div class="btn-group btn-group-vertical">\
					<div class="btn btn-success">正常</div>\
					<div class="btn btn-success">異常</div>\
					<div class="btn btn-success">BRT路線</div>\
					<div class="btn btn-success">快捷巴士</div>\
				</div>',
				google.maps.ControlPosition.RIGHT_BOTTOM,
				{
					backgroundColor:'silver',
					width: 130,
					marginBottom:5,
					marginRight:5
				}
			);

			$('#centerview').hide().fadeIn(300);
		};

		var bt4=function(){

			// 基本版型
				$('ul.nav').empty()
				.append('<li class="active"><a href="#">首页</a></li>')
				.append('<li class="active"><a href="#">排程</a></li>')
				.append('<li class="active"><a href="#">路口參數</a></li>');

				$('table td.bottomInfo').hide();//.css('height','0px');
				qmap=$('#centerview').empty().css('background-color','transparent');
				qmap.append('\
					<div style="position:relative;z-index:-1;">\
					<span class="btn btn-success" style="float:left;margin:3px;font-size:12pt;">新增時段</span>\
					<span class="btn btn-success lcn_calculate" style="float:right;margin:3px;font-size:12pt;" data-toggle="button">行事曆</span>\
					<ul class="nav nav-tabs">\
						<li class="active">\
							<a style="cursor: pointer;" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');"><span style="color:#303030;">平日(6)</span></a>\
						</li>\
						<li>\
							<a style="cursor: pointer;" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');"><span style="color:orangered;">例假日(7)</span></a>\
						</li>\
						<li>\
							<a style="cursor: pointer;" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');"><span style="color:brown;">特別日 1(8)</span></a>\
						</li>\
						<li>\
							<a style="cursor: pointer;" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');"><span style="color:darkgreen;">特別日 2(9)</span></a>\
						</li>\
					</ul>\
					</div>\
				');

				qmap.append('\
					<div style="display:table;position:absolute;width:400px;right:0px;display:none;" class="lcn_calculate">\
						<div style="text-align:center;display:table-cell; vertical-align:middle;"><img draggable="false" src="calculate_sample.png" style="z-index:100;"></div>\
						<div style="text-align:center;display:table-cell; vertical-align:middle;"><img draggable="false" src="calculate_sample.png" style="z-index:100;"></div>\
					</div>\
				');
				
				qmap.append(
					'<div style="height:100%;padding:10px;padding-top:10px;">\
						<label style="float:left;margin-right:10px;font-size:14pt;font-weight:bold;">路口名稱　\
							<select class="span3" style="margin:2px;font-size:12pt;font-weight:bold;">\
								<option>忠明路口</option>\
								<option>英才路口</option>\
								<option>五權路口</option>\
							</select>\
						</label>\
						<label style="float:left;margin-right:10px;font-size:14pt;font-weight:bold;">日　　期　<input type="date" value="2013-09-12" style="font-size:14pt;font-weight:bold;" /></label>\
						\
						<a class="data_header_insert_point" style="display:none;"></a>\
						\
						<div style="height:100px;text-align:right;clear:both;">\
							<span class="btn btn-large btn-inverse">放棄</span>\
							<span class="btn btn-large btn-inverse">保存</span>\
						</div>\
					</div>'
				);

				$('\
					<div style="clear:both;text-align:right;margin:5px;">\
						<span class="btn btn-deltime">刪除選取</span>\
						<span class="btn btn-addtime">新增時間</span>\
					</div>\
				').insertBefore(qmap.find('a.data_header_insert_point'));		// 插入點;

				$('\
					<table class="table table-bordered mainbody">\
						<thead>\
							<tr class="header">\
								<th style="color:blue;text-align:center;font-size:12pt;font-weight:bold;width:174px;" colspan="3">計畫編號與起始時間</th>\
								<th style="color:blue;text-align:center;font-size:12pt;font-weight:bold;width:630px;" colspan="2">時制設定</th>\
							</tr>\
						</thead>\
						<tbody></tbody>\
					</table>\
				').insertAfter(qmap.find('a.data_header_insert_point'));		// 插入點;

			// 資料列的 UI 設計
			var create_tr_ui=function(data){
				var ui=$('\
					<tr>\
						<th style="width:20px;text-align:center;padding-top:24px;"><input type="checkbox" style="margin:2px;" /></th>\
						<th style="width:20px;text-align:center;padding-top:22px;"><input type="number" style="width:15px;height:18px;" value=1 /></th>\
						<th style="color:#505050;font-size:18pt;font-weight:bold;vertical-align:top;padding-top:20px;width:40px;">\
							<div class="input-append bootstrap-timepicker">\
								<input type="text" class="input-small" style="width:50px;">\
								<span class="add-on"><i class="icon-time"></i></span>\
							</div>\
						</th>\
						<td style="color:#505050;font-size:18pt;font-weight:bold;vertical-align:top;width:150px;padding-top:20px;text-align:center;">\
							<select style="width:130px;font-size:12pt;font-weight:bold;">\
								<option selected="selected">普通二時相</option>\
								<option>閃黃燈</option>\
							</select>\
						</td>\
						<td style="padding:0px;">\
							<table style="width:100%;margin:0px;height:100%;">\
								<thead>\
									<tr>\
										<th class="display-btn" onclick="console.log(a=this);$(this).parent().parent().parent().find(\'tbody tr.phase_details\').toggle(150);" style="cursor:pointer;width:30px;text-align:center;">＋</th>\
										<th style="text-align:center;color:red !important;">分1</th>\
										<th style="text-align:center;color:red !important;">分2</th>\
										<th style="text-align:center;color:red !important;">分3</th>\
										<th style="text-align:center;color:red !important;">分4</th>\
										<th style="text-align:center;color:red !important;">分5</th>\
										<th style="text-align:center;color:red !important;">分6</th>\
										<th style="text-align:center;color:red !important;">分7</th>\
										<th style="text-align:center;color:red !important;">分8</th>\
										<th style="text-align:center;color:red !important;">週期</th>\
										<th style="text-align:center;color:red !important;">延遲</th>\
									</tr>\
									<!--總攬-->\
									<tr class="phase_overview">\
										<td style="color:#0080FF;font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">總秒數</td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
								</thead>\
								<tbody>\
									<!--細項-->\
									<tr class="phase_details">\
										<th style="font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">紅</th>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
									<!--細項-->\
									<tr class="phase_details">\
										<th style="font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">綠</th>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
									<tr class="phase_details">\
										<th style="font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">黃</th>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
									<tr class="phase_details">\
										<th style="font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">行綠</th>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
									<tr class="phase_details">\
										<th style="font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">行綠閃</th>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
									<tr class="phase_details">\
										<th style="font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">最小綠</th>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
									<tr class="phase_details">\
										<th style="font-weight:bold;font-size:8pt;padding-left:0px;padding-right:0px;text-align:center;">最大綠</th>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
										<td style="padding:0px;"><input type="number" style="padding:0px;margin:0px;width:100%;border-width:0px;height:100%;font-size:14pt;font-weight:bold;"" /></td>\
									</tr>\
								</tbody>\
							</table>\
							\
						</td>\
					</tr>\
				');

				// script
				var tp=ui.find('div.bootstrap-timepicker>input').css('font-size','14pt').timepicker({
					minuteStep: 10,
					showSeconds: false,
					showMeridian: false,
					defaultTime: 'current'
				});
				if(data && data.setTime) tp.timepicker('setTime',data.setTime);
				ui.find('tr.phase_details>td>input').val(0);
				ui.find('tr.phase_overview>td>input').css({backgroundColor:'#f9f9f9'}).val(0);
				ui.find('th').css({fontWeight:'bold',color:'darkgreen'});
				ui.find('.phase_overview input').css({textAlign:'center',color:'#0080FF'});
				ui.find('.phase_details input').css({textAlign:'center',color:'#008080'});
				ui.find('.display-btn').click(function(e){
					if($(this).text()=='＋'){
						$(this).text('－');
					}
					else{
						$(this).text('＋');
					}
				});

				return ui;
			};
			create_tr_ui.create_and_insert=function(data,after_target){
				if(after_target==undefined){
					create_tr_ui(data).appendTo(qmap.find('table.table.mainbody>tbody'));
				}
				else{
					create_tr_ui(data).insertAfter(after_target);	
				}
			};

			// 新增時間按鈕 script
			qmap.find('.btn-addtime').click(function(e){
				var item=qmap.find('tbody>tr>th>input[type=checkbox]:checked:last').parent().parent();
				if(item.length!=0) create_tr_ui.create_and_insert(undefined,item);
				else create_tr_ui.create_and_insert(undefined);
			});

			// 刪除時間按鈕 script
			qmap.find('.btn-deltime').click(function(e){
				var items=qmap.find('tbody>tr>th>input[type=checkbox]:checked');
				for(var i=0;i<items.length;i++){
					$(items[i]).parent().parent().remove();
				}
			});

			// 路口行事曆
			qmap.find('span.btn.lcn_calculate').click(function(e){qmap.find('div.lcn_calculate').toggle()});

			// 展示資料(可以刪除)
				// var i=0;
				for(var i=0;i<6;i++){
					create_tr_ui.create_and_insert( { setTime: i<10 ? '0'+i+':00' : i+':00' } );
				};

			// 樣式&特效
				$('table.table td').css({textAlign:'center'});
				$('table.table th').css({textAlign:'center'});
				$('table.table tr.phase_details th').css({
					textAlign:'center',
					backgroundColor: '#f9f9f9',
					fontWeight:'bold',
					fontSize:'8pt',
					paddingLeft:0,
					paddingRight:0
				});
				$('#centerview').hide().fadeIn(300);
		};

		var bt5=function(){

			// 基本版頭
				$('ul.nav').empty()
				.append('<li class="active"><a href="#">首页</a></li>')
				.append('<li class="active"><a href="#">排程</a></li>')
				.append('<li class="active"><a href="#">路口排程</a></li>');

				$('table td.bottomInfo').hide();
				qmap=$('#centerview').empty().css('background-color','transparent');
				qmap.append('\
					<div style="position:relative;z-index:-1;" class="tab-topc">\
					<!--span class="btn btn-success" style="float:left;margin:3px;font-size:12pt;">新增時間</span-->\
					<ul class="nav nav-tabs">\
						<li class="active"><a href="#" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');">平日</a></li>\
						<li><a style="cursor:pointer;" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');">例假日</a></li>\
						<li><a style="cursor:pointer;" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');">特別日 1</a></li>\
						<li><a style="cursor:pointer;" onclick="$(this).parent().parent().find(\'li\').attr(\'class\',\'\');$(this).parent().attr(\'class\',\'active\');">特別日 2</a></li>\
					</ul>\
					</div>\
				');

				$('<div class="alert"></div>').css({margin:10}).insertAfter('#centerview div.tab-topc');
				$('<label class="checkbox inline">忠明路<input type="checkbox" value="1" checked/></label>').appendTo('#centerview>.alert');
				$('<label class="checkbox inline">英才路<input type="checkbox" value="1" checked/></label>').appendTo('#centerview>.alert');
				$('<label class="checkbox inline">五明路<input type="checkbox" value="1" checked/></label>').appendTo('#centerview>.alert');

			// 展示資料(可以刪除)
				qmap.append(
					'<div style="height:100%;padding:10px;padding-top:10px;">\
						<!--label style="font-size:14pt;font-weight:bold;">日　　期　<input type="date" value="2013-09-12" style="font-size:14pt;font-weight:bold;" /></label-->\
						<table class="table table-striped table-bordered schedule_table">\
							<tbody>\
								<tr>\
									<th><div style="position:relative;height:40px;"><b style="position:absolute;top:0px;right:0px;">控制策略</b><b style="position:absolute;bottom:0px;left:0px;">起始時間</b></div></th>\
									<th style="vertical-align:middle;font-size:14pt;font-weight:bold;">忠明路</th>\
									<th style="vertical-align:middle;font-size:14pt;font-weight:bold;">英才路</th>\
									<th style="vertical-align:middle;font-size:14pt;font-weight:bold;">五明路</th>\
								</tr>\
							</tbody>\
						</table>\
						<div style="height:100px;text-align:right">\
							<span class="btn btn-large btn-inverse">放棄</span>\
							<span class="btn btn-large btn-inverse">保存</span>\
						</div>\
					</div>\
				');

				var st=qmap.find('table.schedule_table tbody');
				for(var i=0;i<24;i++){
					st.append('\
						<tr>\
							<th style="color:#505050;font-size:18pt;font-weight:bold;vertical-align:middle;">'+( i<10 ? '0'+i : i )+':00</th>\
							<td>'+(Math.random() > 0.5 ? '<span class="btn btn-warning">定時時制</span>' : '<span class="btn btn-danger">優先號誌</span>')+'</td>\
							<td>'+(Math.random() > 0.5 ? '<span class="btn btn-warning">定時時制</span>' : '<span class="btn btn-danger">優先號誌</span>')+'</td>\
							<td>'+(Math.random() > 0.5 ? '<span class="btn btn-warning">定時時制</span>' : '<span class="btn btn-danger">優先號誌</span>')+'</td>\
						</tr>\
					');
				};

			// 按鈕切換
				$('table.table td span.btn').click(function(e){
					switch(e.target.innerText){
						case '定時時制':
							$(e.target).text('優先號誌').attr('class','btn btn-danger');
							break;
						case '優先號誌':
							$(e.target).text('定時時制').attr('class','btn btn-warning');
							break;
					};
				});

			// 樣式&特效
				$('table.table td').css({textAlign:'center'});
				$('table.table th').css({textAlign:'center'});
				$('#centerview').hide().fadeIn(300);
		};

		var bt6=function(){

			$('ul.nav').empty()
			.append('<li class="active"><a href="#">首页</a></li>')
			.append('<li class="active"><a href="#">BRT績效</a></li>');

			$('table td.bottomInfo').show();
			qmap=$('#centerview').empty().css('background-color','transparent').buildGoogleMap();

			$('#centerview').hide().fadeIn(300);
		};

		var bt7=function(){

			$('ul.nav').empty()
			.append('<li class="active"><a href="#">首页</a></li>')
			.append('<li class="active"><a href="#">事故顯示</a></li>');

			$('table td.bottomInfo').css('height','200px');
			qmap=$('#centerview').empty().css('background-color','transparent').buildGoogleMap();

			$('#centerview').hide().fadeIn(300);
		};

		// 表關聯
		var buttonsTable={
			登入:bt0,
			即時狀態:bt1,
			號誌控制邏輯:bt2,
			控制設備資訊:bt3,
			路口參數:bt4,
			路口排程:bt5,
			BRT績效:bt6,
			事故顯示:bt7,
		};

		$(document).ready(function(e){
			bt1();
		});
	</script>

	<style>
		table.table input:hover {
			background-color: lightyellow;
		}

		body {
			font-family: '微軟正黑體' !important;
		}

		.accordion .btn-primary {
			font-size: 16pt !important;
			font-weight:bold !important;
		}

		.accordion-inner label {
			font-size: 12pt !important;
			font-weight:bold !important;
		}

		.accordion-inner .btn {
			font-weight:bold !important;
			font-size: 12pt;
		}

		.brand {
			font-size: 20pt !important;
			font-weight:bold !important;
		}

		.btn.btn-success {
			font-weight:bold !important;
			font-size: 10pt;
		}

		.navbar-inner {
			padding-right:0px;
		}

		.navbar .nav {
			float:right !important;
			margin-right:0px;
		}

		.btn {
			font-weight: bold !important;
		}

		body>table {
			background-color: white !important;
			box-shadow: 0px 0px 20px #202020;
			border-radius: 5px 5px 0px 0px;
			color: #303030;
		}

		html {
			background-color: #DDDDDD;
		}

		.bottomInfo {
			background-color: #EEEEEE;
			box-shadow: #505050 0px 0px 20px inset;
		}

		.popover {
			z-index: 100 !important;
		}

		tr.phase_details {
			display: none;
		}

		table.table thead {
			background-color: #f9f9f9;
		}

		/* 關閉 Input:Number 右側的 Spinner */
		input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}
	</style>
	<script>
		// Demo 路徑
		var path=[
			[24.172680000000003,120.63425000000001],
			[24.169670000000004,120.63821000000002],
			[24.169390000000003,120.63861000000001],
			[24.16787,120.64086],
			[24.16769,120.64109],
			[24.166420000000002,120.64283],
			[24.16606,120.64346],
			[24.1645,120.64630000000001],
			[24.164440000000003,120.64635000000001],
			[24.16288,120.64920000000001],
			[24.162740000000003,120.64945000000002],
			[24.16268,120.64963000000002],
			[24.162570000000002,120.64983000000001],
			[24.161550000000002,120.65174],
			[24.16081,120.65303000000002],
			[24.15922,120.65593000000001],
			[24.158160000000002,120.65785000000001],
			[24.15715,120.65970000000002],
			[24.155590000000004,120.66253],
			[24.15463,120.66423],
			[24.15455,120.66430000000001],
			[24.153920000000003,120.66552000000001],
			[24.153910000000003,120.66562],
			[24.153730000000003,120.66596000000001],
			[24.153200000000002,120.66686000000001],
			[24.152630000000002,120.66779000000001],
			[24.152220000000003,120.66841000000001],
			[24.151010000000003,120.66986000000001],
			[24.150750000000002,120.67013000000001],
			[24.149910000000002,120.67108],
			[24.1491,120.67198],
			[24.14795,120.67331000000001],
			[24.14768,120.67365000000001],
			[24.14723,120.67410000000001],
			[24.145940000000003,120.67555000000002],
			[24.145470000000003,120.67609000000002],
			[24.142470000000003,120.67958000000002],
			[24.139380000000003,120.68310000000001]
		];

		// 車站

		// 路口

		$(document).ready(function(e){
			qmap.add_section_polyline_by_array(path);
		});
	</script>
</body>
</html>